<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>SketchInput</title>
    <link rel="stylesheet" href="<@css_path@>">
    <link href='fonts/roboto.css' rel='stylesheet' type='text/css'>
  </head>
  <body>
    <div id="si-container">
      <div id="si-placeholder">
        Loading SketchInput...
      </div>
    </div>
    <script src="<@systemjs_path@>"></script>
    <script src="<@configjs_path@>"></script>
    <script>
      var debugConfig = {
        width: 750,
        height: 420,
        xrange: [-4.5, 4.5],
        yrange: [-2.5, 2.5],
        xscale: 'linear',
        yscale: 'linear',
        plugins: [
          {name: 'axes'},
          {name: 'freeform', id: 'f', label: 'Function f(x)', color: 'blue'},
          {name: 'freeform', id: 'g', label: 'Derivative g(x)', color: 'orange'},
          {name: 'vertical-line', id: 'va', label: 'Vertical asymptote', color: 'gray', dashStyle: 'dashdotted'},
          {name: 'horizontal-line', id: 'ha', label: 'Horizontal asymptote', color: 'gray', dashStyle: 'dashdotted'},
          {name: 'point', id: 'cp', label: 'Critical point', color: 'black', size: 15},
        ],
      };
    </script>
    <script>
      var config, si;

      try {
        config = (window.location.hash === '#debug') ? debugConfig :
          JSON.parse(atob(
            window.location.hash
              .slice(1)
              .replace(/-/g, '+')
              .replace(/_/g, '/')
          ));
      }
      catch (error) {
        document.getElementById('si-placeholder').textContent =
          'Could not parse problem configuration data';
        throw error;
      }

      System.import('lib/main').then(function(main) {
        si = new main.default(document.getElementById('si-container'), config);
      });
    </script>
  </body>
</html>
